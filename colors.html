<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Word Roulette</title>
  <style>
    body {
      background: black;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      margin: 0;
      padding-top: 50px;
    }
    #word-display {
      font-size: 100px;
      font-weight: bold;
      margin-bottom: 20px;
    }
    #timer {
      font-size: 50px;
      margin-bottom: 20px;
    }
    #controls {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    input {
      font-size: 24px;
      width: 80px;
      text-align: center;
    }
    button {
      font-size: 24px;
      padding: 5px 15px;
      border-radius: 5px;
      border: none;
      background: gray;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <div id="word-display">Loading...</div>
  <div id="timer"></div>

  <div id="controls">
    <label for="interval-input" style="font-size: 20px;">Interval</label>
    <input type="number" id="interval-input" value="10" min="1" max="60">
    <button id="restart-btn">Next Word</button>
  </div>

  <script>
    const allWords = [
      "Red","Blue","Green","Yellow","Black","White","Pink","Purple","Orange","Brown",
      "Gray","Magenta","Lavender","Maroon","Olive","Tan","Gold","Silver","Teal","Cream","Lime"
    ];
    let wordArray = [];
    let timer, secondsLeft, currentIndex = 0;

    // Shuffle helper
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Assign colors based on 1/3 actual, 2/3 mismatched
    function assignColors() {
      let shuffledWords = shuffle([...allWords]);
      let total = shuffledWords.length;
      let oneThird = Math.floor(total / 3); // ~7
      let twoThirds = total - oneThird;

      let actualColorWords = shuffledWords.slice(0, oneThird);
      let mismatchWords = shuffledWords.slice(oneThird);

      let assignments = [];

      // Actual color assignments
      actualColorWords.forEach(word => {
        assignments.push({word: word, color: word.toLowerCase()});
      });

      // Mismatched color assignments
      let mismatchColors = shuffle([...mismatchWords]);
      mismatchWords.forEach((word, i) => {
        let color = mismatchColors[i];
        if (color === word) {
          color = mismatchColors[(i+1) % mismatchColors.length];
        }
        assignments.push({word: word, color: color.toLowerCase()});
      });

      return shuffle(assignments);
    }

    function startCycle() {
      wordArray = assignColors();
      currentIndex = 0;
      startTimer();
    }

    function startTimer() {
      clearInterval(timer);
      secondsLeft = parseInt(document.getElementById("interval-input").value) || 10;
      displayWord();
      document.getElementById("timer").textContent = secondsLeft;
      timer = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      secondsLeft--;
      document.getElementById("timer").textContent = secondsLeft;
      if (secondsLeft <= 0) {
        clearInterval(timer);
        currentIndex++;
        if (currentIndex >= wordArray.length) {
          startCycle();
        } else {
          startTimer();
        }
      }
    }

    function displayWord() {
      let entry = wordArray[currentIndex];
      const display = document.getElementById("word-display");
      display.textContent = entry.word;
      display.style.color = entry.color;
    }

    // Next word function
    function nextWord() {
      clearInterval(timer);
      currentIndex++;
      if (currentIndex >= wordArray.length) {
        startCycle();
      } else {
        startTimer();
      }
    }

    // Button → go to next word immediately
    document.getElementById("restart-btn").addEventListener("click", nextWord);

    // Enter key → same as button
    document.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        nextWord();
      }
    });

    window.onload = () => {
      startCycle();
    };
  </script>
</body>
</html>
